"use strict";
/**
 * in-memory channel to mock IO
 * */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ArraySource = exports.ArraySink = void 0;
const pipe_1 = require("./pipe");
class ArraySink extends pipe_1.Sink {
    constructor(memory) {
        super();
        this.memory = memory;
    }
    write(data) {
        this.memory.push(data);
    }
    close() {
        delete this.memory;
    }
}
exports.ArraySink = ArraySink;
/**
 * in-memory channel to mock IO
 * */
class ArraySource extends pipe_1.Source {
    constructor(memory) {
        super();
        this.memory = memory;
        this.position = 0;
    }
    read() {
        return this.memory[this.position++];
    }
    *iterator(options) {
        for (const data of this.memory) {
            yield data;
        }
    }
    close() {
        delete this.memory;
    }
}
exports.ArraySource = ArraySource;
//# sourceMappingURL=array.js.map