"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.JsonSource = exports.JsonSink = void 0;
const pipe_1 = require("./pipe");
class JsonSink extends pipe_1.Sink {
    constructor(sink) {
        super();
        this.sink = sink;
    }
    write(data) {
        this.sink.write(JSON.stringify(data));
    }
    close() {
        this.sink.close();
    }
}
exports.JsonSink = JsonSink;
class JsonSource extends pipe_1.Source {
    constructor(source) {
        super();
        this.source = source;
    }
    read() {
        const data = this.source.read();
        return JSON.parse(data);
    }
    *iterator(options) {
        for (const data of this.source.iterator(options)) {
            yield JSON.parse(data);
        }
    }
    close() {
        this.source.close();
    }
}
exports.JsonSource = JsonSource;
//# sourceMappingURL=json.js.map