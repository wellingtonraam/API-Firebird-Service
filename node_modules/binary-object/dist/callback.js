"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StoppableCallbackSource = void 0;
const tslib_1 = require("tslib");
class StoppableCallbackSource {
    constructor(source) {
        this.source = source;
        this.stopped = false;
    }
    read(cb) {
        this.source.read(cb);
    }
    close() {
        var _a, _b;
        this.stopped = true;
        (_b = (_a = this.source).close) === null || _b === void 0 ? void 0 : _b.call(_a);
    }
    iterator() {
        return tslib_1.__asyncGenerator(this, arguments, function* iterator_1() {
            for (;;) {
                if (this.stopped) {
                    break;
                }
                yield yield tslib_1.__await(new Promise(resolve => this.read(resolve)));
            }
        });
    }
}
exports.StoppableCallbackSource = StoppableCallbackSource;
//# sourceMappingURL=callback.js.map