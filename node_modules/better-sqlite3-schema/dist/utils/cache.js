"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.newCache = void 0;
function newCache(options) {
    let cache = {};
    let size = 0;
    const resetSize = options === null || options === void 0 ? void 0 : options.resetSize;
    function get(key, genFn) {
        if (key in cache) {
            return cache[key];
        }
        const res = (cache[key] = genFn(key));
        size += key.length;
        if (resetSize && size >= resetSize) {
            clear();
        }
        return res;
    }
    function clear() {
        cache = {};
        size = 0;
    }
    return {
        get,
        clear,
        wrapFn: fn => key => get(key, fn),
    };
}
exports.newCache = newCache;
//# sourceMappingURL=cache.js.map